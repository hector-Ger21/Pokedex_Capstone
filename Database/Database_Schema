-- 1. Main Pokémon table
CREATE TABLE pokedex (
    pokedex_number INTEGER PRIMARY KEY,
    name TEXT,
    japanese_name TEXT,
    classfication TEXT,
    generation INTEGER,
    is_legendary BOOLEAN
);

-- 2. Stats table
CREATE TABLE stats (
    pokedex_number INTEGER PRIMARY KEY REFERENCES pokedex(pokedex_number) ON DELETE CASCADE,
    hp INTEGER,
    attack INTEGER,
    defense INTEGER,
    sp_attack INTEGER,
    sp_defense INTEGER,
    speed INTEGER,
    base_total INTEGER
);

-- 3. Physical info table
CREATE TABLE physical_info (
    pokedex_number INTEGER PRIMARY KEY REFERENCES pokedex(pokedex_number) ON DELETE CASCADE,
    height_m DOUBLE PRECISION,
    weight_kg DOUBLE PRECISION,
    capture_rate TEXT,
    base_egg_steps INTEGER,
    base_happiness INTEGER,
    percentage_male DOUBLE PRECISION
);

-- 4. Types table
CREATE TABLE types (
    id SERIAL PRIMARY KEY,
    name TEXT UNIQUE
);

-- 5. Junction table: Pokémon x Types
CREATE TABLE pokemon_types (
    pokedex_number INTEGER REFERENCES pokedex(pokedex_number) ON DELETE CASCADE,
    type_id INTEGER REFERENCES types(id) ON DELETE CASCADE,
    slot INTEGER CHECK (slot IN (1, 2)),
    PRIMARY KEY (pokedex_number, slot)
);

-- 6. Abilities table
CREATE TABLE abilities (
    id SERIAL PRIMARY KEY,
    name TEXT UNIQUE
);

-- 7. Junction table: Pokémon x abilities
CREATE TABLE pokemon_abilities (
    pokedex_number INTEGER REFERENCES pokedex(pokedex_number) ON DELETE CASCADE,
    ability_id INTEGER REFERENCES abilities(id) ON DELETE CASCADE,
    PRIMARY KEY (pokedex_number, ability_id)
);

-- 8. Type effectiveness table
CREATE TABLE effectiveness (
    pokedex_number INTEGER PRIMARY KEY REFERENCES pokedex(pokedex_number) ON DELETE CASCADE,
    against_bug DOUBLE PRECISION,
    against_dark DOUBLE PRECISION,
    against_dragon DOUBLE PRECISION,
    against_electric DOUBLE PRECISION,
    against_fairy DOUBLE PRECISION,
    against_fight DOUBLE PRECISION,
    against_fire DOUBLE PRECISION,
    against_flying DOUBLE PRECISION,
    against_ghost DOUBLE PRECISION,
    against_grass DOUBLE PRECISION,
    against_ground DOUBLE PRECISION,
    against_ice DOUBLE PRECISION,
    against_normal DOUBLE PRECISION,
    against_poison DOUBLE PRECISION,
    against_psychic DOUBLE PRECISION,
    against_rock DOUBLE PRECISION,
    against_steel DOUBLE PRECISION,
    against_water DOUBLE PRECISION
);
